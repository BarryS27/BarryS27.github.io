// =========================================
// 1. Variables (Add these new variables)
// =========================================

// --- Component: iOS Button ---
$btn-padding-compact: 8px 20px;
$btn-height-min: 36px;
$btn-font-size-ios: 0.9rem;
$btn-font-weight-ios: 500;
$btn-letter-spacing: -0.01em;
$btn-radius-pill: 999px;

// --- Button Colors & Glass ---
$btn-bg-glass: rgba($color-brand-gold-mid, 0.75); 
$btn-border-glass: 1px solid rgba(255, 255, 255, 0.25);
$btn-shadow-ios: 0 4px 12px rgba($color-brand-gold-start, 0.2);

// --- Base Palette: High Contrast Day ---
$color-bg: #f5f5f7; 
$color-text-main: rgba(29, 29, 31, 0.95); 
$color-text-muted: rgba(29, 29, 31, 0.65);
$color-text-sub: rgba(29, 29, 31, 0.45);

// --- Brand Color: Sunrise Gold/Orange ---
$color-brand-gold-start: #B45309; 
$color-brand-gold-mid: #F59E0B;   
$color-brand-gold-end: #FCD34D;   

$color-interactive: #FB923C; 
$color-interactive-glow: rgba(251, 146, 60, 0.25); 

$color-tag-reading: #15803d; 
$color-tag-building: #1d4ed8; 
$color-status-live: #ea580c; 

// --- Layout & Spacing ---
$container-width: 900px;
$spacing-xs: 8px;
$spacing-sm: 16px;
$spacing-md: 24px;
$spacing-lg: 35px;
$spacing-xl: 50px;
$spacing-2xl: 80px;

$radius-card: 24px;
$radius-btn: 100px;
$radius-menu: 16px;
$radius-profile: 30px;

// --- Typography ---
$font-stack: "Inter", "Segoe UI", sans-serif;
$font-serif: "Newsreader", "Times New Roman", serif;

$font-size-base: 16px;
$font-size-sm: 0.88em;
$font-size-md: 0.98em;
$font-size-lg: 1.15em;
$font-size-xl: 1.75em;
$font-size-2xl: 2.8em;

$line-height-base: 1.8;
$line-height-tight: 1.6;
$line-height-relaxed: 1.7;

// --- Transitions ---
$transition-fast: 0.3s ease;
$transition-smooth: 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
$transition-bounce: 2s cubic-bezier(0.4, 0, 0.6, 1);

// --- Shadows ---
$shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
$shadow-md: 0 4px 20px rgba(0, 0, 0, 0.12);
$shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.2);
$shadow-xl: 0 20px 50px -10px rgba(0, 0, 0, 0.25);

// --- Glass Effects ---
$glass-blur-standard: 40px;
$glass-blur-menu: 30px;
$glass-blur-liquid: 8px;
$glass-blur-island: 20px;

$glass-bg-standard: rgba(255, 255, 255, 0.65);
$glass-bg-interactive: rgba(255, 255, 255, 0.4);
$glass-bg-dark: rgba(0, 0, 0, 0.75);
$glass-bg-light: rgba(255, 255, 255, 0.8);

// --- Borders ---
$border-standard: 1px solid rgba(0, 0, 0, 0.06);
$border-top-highlight: 1px solid rgba(255, 255, 255, 0.4);
$border-glass-light: 1px solid rgba(255, 255, 255, 0.9);
$border-divider: 1px solid rgba(0, 0, 0, 0.06);


/* =========================================
   2. Mixins: Refactored Physics (Light & Shadow)
   ========================================= */

// --- Material A: "Thin Ice" (Standard Card) ---
@mixin glass-standard($blur: $glass-blur-standard) {
    background: $glass-bg-standard;
    backdrop-filter: blur($blur) saturate(180%);
    -webkit-backdrop-filter: blur($blur) saturate(180%);
    
    border: $border-standard;
    border-top: $border-top-highlight;
    
    box-shadow: $shadow-md, $shadow-sm;
}

// --- Material B: "Liquid Gold" (Interactive) ---
@mixin glass-liquid {
    background: linear-gradient(
        225deg,
        rgba(255, 255, 255, 0.9) 0%,
        rgba(255, 255, 255, 0.4) 40%,
        rgba(255, 255, 255, 0.1) 100%
    );
    
    backdrop-filter: url("#liquid-filter") blur($glass-blur-liquid) saturate(200%);
    -webkit-backdrop-filter: url("#liquid-filter") blur($glass-blur-liquid) saturate(200%);
    transform: translate3d(0, 0, 0);

    border: $border-glass-light;
    border-bottom-color: rgba(0, 0, 0, 0.1);
    
    box-shadow: 
        $shadow-xl, 
        inset 0 0 30px rgba(255, 200, 100, 0.25), 
        inset 0 1px 0 0 rgba(255, 255, 255, 1); 
}

// --- Utilities ---
@mixin text-gradient-gold {
    background: linear-gradient(
        135deg, 
        $color-brand-gold-start 0%, 
        $color-brand-gold-mid 50%, 
        $color-brand-gold-end 100%
    );
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.1));
}

@mixin flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

@mixin flex-column($gap: $spacing-md) {
    display: flex;
    flex-direction: column;
    gap: $gap;
}

@mixin focus-visible {
    &:focus-visible {
        outline: 2px solid $color-brand-gold-mid;
        outline-offset: 2px;
    }
}


/* =========================================
   3. Global Implementation
   ========================================= */

* {
    box-sizing: border-box;
}

html { 
    scroll-behavior: smooth; 
}

body {
    margin: 0; 
    padding: 0;
    font-family: $font-stack;
    color: $color-text-main;
    line-height: $line-height-base;
    overflow-x: hidden;
    font-size: $font-size-base;
    font-weight: 400; 
    min-height: 100vh;
    background-color: $color-bg;

    &::before {
        content: "";
        position: fixed;
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%;
        background-image: url('/static/images/reg-day.webp'); 
        background-repeat: no-repeat;
        background-position: center center;
        background-size: cover;
        filter: brightness(1.05) saturate(130%); 
        z-index: -1;
    }
}


/* =========================================
   4. Layout Container
   ========================================= */

.container {
    @include flex-column($spacing-xl);
    max-width: $container-width; 
    margin: 0 auto; 
    padding: $spacing-2xl $spacing-md;
}

.error-container {
    min-height: 80vh;
    @include flex-center;
}


/* =========================================
   5. Base Card Component
   ========================================= */

.card {
    @include glass-standard;
    border-radius: $radius-card;
    padding: $spacing-lg;
    transition: transform $transition-smooth;
}

.interactive-card {
    @extend .card;
    cursor: pointer;
    transition: all $transition-smooth;
    
    @include glass-standard($glass-blur-menu);
    background: $glass-bg-interactive;

    @media (hover: hover) {
        &:hover {
            @include glass-liquid; 
            transform: translateY(-5px) scale(1.01) translate3d(0, 0, 0);
        }
    }
}

.section-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    font-weight: 700;
    color: rgba(0, 0, 0, 0.45);
    margin: 0 0 20px 0;
    display: block;
}


/* =========================================
   6. Card Type Definitions (ID-based)
   ========================================= */

// Hero Card (Home Page)
#hero {
    display: flex;       
    flex-direction: row;
    align-items: center;
    gap: 40px;
    text-align: left;
    padding: 40px 50px;

    .profile-pic {
        flex-shrink: 0;
        width: 130px;
        height: 130px;
        margin-bottom: 0;
    }

    .hero-text {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

    .main-name {
        font-size: $font-size-2xl;
        font-weight: 700;
        margin: 0 0 $spacing-sm 0;
        letter-spacing: -0.02em;
        color: $color-text-main; 
        background: none;
        -webkit-text-fill-color: initial;
    }

    .field-name {
        font-size: $font-size-lg;
        color: $color-text-muted;
        margin: 0 0 $spacing-md 0;
        font-weight: 500;
    }
}

// Portfolio Hero Card (Work Page)
#portfolio-hero {
    @include flex-column($spacing-md);
    align-items: center;
    text-align: center;
    padding: $spacing-2xl $spacing-lg;

    .main-name {
        font-size: $font-size-2xl;
        font-weight: 700;
        margin: 0 0 $spacing-sm 0;
        letter-spacing: -0.02em;
        @include text-gradient-gold;
    }

    .field-name {
        font-size: $font-size-lg;
        color: $color-text-muted;
        margin: 0;
        font-weight: 500;
    }
}

// About Card
#about {
    p {
        line-height: $line-height-base;
        margin: 0;
    }
}

// Now Card
#now {
    .now-subtitle {
        color: $color-text-muted;
        margin: -$spacing-xs 0 28px 0;
        font-size: 0.95em;
    }

    .now-grid {
        @include flex-column($spacing-md);

        .now-item {
            display: flex;
            gap: $spacing-sm;
            align-items: flex-start;
            padding-bottom: 20px;
            border-bottom: $border-divider;

            .now-icon {
                font-size: 1.4em;
                width: 42px;
                min-width: 42px;
                @include flex-center;

                i {
                    color: rgba(0, 0, 0, 0.7);
                    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
                }
            }

            .now-details {
                flex: 1;
                line-height: $line-height-relaxed;
                font-size: $font-size-md;

                .now-category {
                    color: $color-text-sub;
                    font-weight: 600;
                }
            }
        }

        .timestamp {
            margin-top: 12px;
            padding-top: 20px;
            border-top: $border-divider;
            font-size: $font-size-sm;
            color: $color-text-sub;
            font-style: italic;
            text-align: right;
            border-bottom: none;
            padding-bottom: 0;
        }
    }
}

// Skills Card
#skills {
    .skills-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: $spacing-sm;

        .skill-item {
            @include flex-column($spacing-xs);
            align-items: center;
            padding: $spacing-md;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.3);
            border: $border-divider;
            transition: all $transition-fast;

            i {
                font-size: 2em;
                color: rgba(0, 0, 0, 0.7);
                filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
            }

            span {
                font-size: 0.9em;
                font-weight: 500;
                color: $color-text-main;
            }

            &:hover {
                background: rgba(255, 255, 255, 0.5);
                transform: translateY(-2px);
                box-shadow: $shadow-sm;
            }
        }
    }
}

// Featured Project Card
#featured-project {
    .project-title {
        font-size: 1.4em;
        font-weight: 600;
        margin: 0 0 $spacing-sm 0;

        a {
            text-decoration: none;
            color: $color-text-main;
            display: inline-flex;
            align-items: center;
            gap: $spacing-xs;
            transition: color $transition-fast;

            i {
                font-size: 0.8em;
                opacity: 0.7;
                transition: all $transition-fast;
            }

            &:hover {
                color: $color-brand-gold-mid;

                i {
                    opacity: 1;
                    transform: translateX(2px);
                }
            }
        }
    }

    .project-meta {
        font-size: $font-size-sm;
        color: $color-text-muted;
        font-weight: 500;
        margin: 0 0 $spacing-md 0;
    }

    .project-description {
        line-height: $line-height-relaxed;
        color: $color-text-main;
        margin: 0;
    }
}

// Error Card (404)
#error {
    @include flex-column($spacing-md);
    align-items: center;
    text-align: center;
    max-width: 600px;
    padding: 60px $spacing-lg;

    .error-icon {
        font-size: 48px;
        color: rgba(255, 255, 255, 0.3);
        margin-bottom: $spacing-sm;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    }

    .terminal-text {
        font-family: 'JetBrains Mono', 'Courier New', monospace;
        font-size: 2em;
        font-weight: 700;
        color: #fff;
        min-height: 40px;
        line-height: 1.2;
        @include flex-center;

        .cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            margin-left: 2px;
            background-color: #34c759;
            box-shadow: 0 0 5px rgba(52, 199, 89, 0.8);
            animation: blink 2s ease-in-out infinite;
        }
    }

    .error-subtitle {
        font-size: 1em;
        color: rgba(255, 255, 255, 0.6);
        margin: $spacing-md 0;
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.8s ease;

        &.visible {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .button {
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease;

        &.visible {
            opacity: 1;
            transform: translateY(0);
        }
    }
}


/* =========================================
   7. Button Component (Variable Based)
   ========================================= */

.button {
    // 1. Layout & Shape
    @include flex-center;
    gap: 6px; 
    padding: $btn-padding-compact;
    min-height: $btn-height-min;
    border-radius: $btn-radius-pill;
    
    // 2. Typography
    text-decoration: none;
    font-size: $btn-font-size-ios;
    font-weight: $btn-font-weight-ios;
    letter-spacing: $btn-letter-spacing;
    color: #fff;
    
    // 3. Material (Glass)
    background: $btn-bg-glass;
    border: $btn-border-glass;
    
    // Blur Effect
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    
    // Shadow
    box-shadow: $btn-shadow-ios;

    // 4. Interaction
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    @include focus-visible;
    
    i { 
        font-size: 0.9em; 
        transition: transform 0.3s ease; 
    }

    // Hover State
    &:hover {
        background: rgba($color-brand-gold-mid, 0.9); 
        border-color: rgba(255, 255, 255, 0.4);
        transform: translateY(-1px);
        box-shadow: 0 6px 16px rgba($color-brand-gold-start, 0.3);
        
        i { 
            transform: translateX(2px); 
        }
    }

    // Active/Click State
    &:active {
        transform: scale(0.96);
        background: rgba($color-brand-gold-mid, 0.95);
        box-shadow: 0 2px 4px rgba($color-brand-gold-start, 0.2);
    }
}


/* =========================================
   8. Footer
   ========================================= */

.footer {
    text-align: center;
    padding: $spacing-xl 0 20px 0;
    color: $color-text-muted;
    
    p {
        margin: $spacing-xs 0;
        font-size: 0.95em;
    }

    .copyright-text {
        font-size: 0.85em;
        color: $color-text-sub;
    }
}


/* =========================================
   9. Animations
   ========================================= */

@keyframes pulse {
    0%, 100% { 
        opacity: 1; 
        transform: scale(1); 
    }
    50% { 
        opacity: 0.7; 
        transform: scale(0.92); 
    }
}

@keyframes blink {
    0%, 100% { 
        opacity: 1; 
    }
    50% { 
        opacity: 0; 
    }
}


/* =========================================
   10. Utility Classes
   ========================================= */

.special-text {
    font-family: $font-serif; 
    font-weight: 600;
    font-style: italic;
    font-size: 1.1em;
    letter-spacing: -0.02em;
    color: #78350f; 
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.6); 
}

// Accessibility - Screen Reader Only
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

// Back to Top Button
.back-to-top {
    position: fixed;
    bottom: 80px;
    right: $spacing-md;
    width: 50px;
    height: 50px;
    @include glass-light;
    @include flex-center;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    opacity: 0;
    transform: translateY(20px);
    transition: all $transition-fast;
    z-index: 9998;
    @include focus-visible;
    
    &.visible {
        opacity: 1;
        transform: translateY(0);
    }
    
    &:hover {
        transform: translateY(-3px);
        box-shadow: $shadow-md;
    }
    
    &:active {
        transform: translateY(-1px);
    }
    
    i {
        color: $color-text-main;
        font-size: 1.2em;
    }
}


/* =========================================
   11. Responsive Design
   ========================================= */

@media (max-width: 768px) {
    .container {
        padding: 60px $spacing-sm;
        gap: $spacing-lg;
    }
    
    .card {
        padding: $spacing-md;
    }

    #hero,
    #portfolio-hero {
        padding: $spacing-xl $spacing-md;

        .profile-pic {
            width: 120px;
            height: 120px;
        }

        .main-name {
            font-size: 2.2em;
        }
    }

    #skills {
        .skills-grid {
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: $spacing-xs;

            .skill-item {
                padding: $spacing-sm;

                i {
                    font-size: 1.6em;
                }

                span {
                    font-size: 0.85em;
                }
            }
        }
    }

    #featured-project {
        .project-title {
            font-size: 1.2em;
        }
    }

    #now {
        .now-grid {
            .now-item {
                .now-icon {
                    font-size: 1.2em;
                    width: 38px;
                    min-width: 38px;
                }
            }
        }
    }

    #error {
        padding: $spacing-lg $spacing-md;

        .error-icon {
            font-size: 36px;
        }

        .terminal-text {
            font-size: 1.5em;
        }

        .error-subtitle {
            font-size: 0.9em;
        }
    }
    
    // Island mobile adjustments
    .island {
        top: auto; 
        bottom: 20px; 
        left: 50%; 
        transform: translateX(-50%);
        align-items: center; 
        gap: 0;

        .pill { 
            display: none; 
        }
        
        .menu {
            opacity: 1;
            transform: none;
            pointer-events: auto;
            flex-direction: row;
            width: auto;
            padding: 10px 20px;
            border-radius: $radius-btn;
            @include glass-dark;
            color: white;

            .links {
                flex-direction: row;
                gap: $spacing-xs;
                
                a { 
                    color: rgba(255, 255, 255, 0.7); 
                    
                    &:hover { 
                        color: white; 
                        background: rgba(255, 255, 255, 0.1); 
                    }
                }
            }
        }
    }
}

@media (max-width: 480px) {
    #hero,
    #portfolio-hero {
        .main-name {
            font-size: 1.8em;
        }
    }
    
    .button {
        padding: 12px 28px;
        font-size: 0.95em;
    }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

// Print styles
@media print {
    body::before {
        display: none;
    }

    .island,
    .button {
        display: none;
    }

    .card {
        break-inside: avoid;
        page-break-inside: avoid;
    }
}
